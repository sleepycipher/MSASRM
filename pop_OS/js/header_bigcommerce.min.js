!function(){const t="//ecommplugins-trustboxpreview.trustpilot.com/v2.0/trustboxpreview.min.js",e="//ecommplugins-scripts.trustpilot.com/v2.1/css/preview.min.css",s="TRUSTPILOT_SKU_VALUE_";function o(t){return btoa(encodeURIComponent(t).replace(/%([0-9A-F]{2})/g,function(t,e){return String.fromCharCode(parseInt(e,16))}))}"undefined"==typeof TrustpilotObject&&function(t,e,s,o,i){t.TrustpilotObject=i,t.tp=t.tp||function(){(t.tp.q=t.tp.q||[]).push(arguments)},a=e.createElement(s),a.async=1,a.src="https://invitejs.trustpilot.com/tp.min.js",a.type="text/java"+s,f=e.getElementsByTagName(s)[0],f.parentNode.insertBefore(a,f)}(window,document,"script",0,"tp"),tp("register",trustpilot_settings.key);const i=new CustomEvent("trustpilotScriptLoaded");if(dispatchEvent(i),function(t){return t&&t.searchParams&&"true"===t.searchParams.get("tpTrustBoxPreview")?(window.sessionStorage.setItem("tpTrustBoxPreview",!0),!0):window.localStorage.getItem("tpTrustBoxPreview")?(window.localStorage.removeItem("tpTrustBoxPreview"),window.sessionStorage.setItem("tpTrustBoxPreview",!0),!0):!!window.sessionStorage.getItem("tpTrustBoxPreview")}(new URL(window.location.href))){var n=document.createElement("script");if(n.type="text/javascript",n.src="//widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js",n.async=!0,document.head.appendChild(n),"undefined"==typeof TrustpilotPreview)try{var r=document.createElement("script");r.type="text/javascript",r.src="//ecommplugins-scripts.trustpilot.com/v2.1/js/preview_shopify.js",r.onload=function(t){const e=document.createElement("iframe");e.id="pixel_iframe",e.src="//ecommscript-integrationapp.trustpilot.com/pixel/index.html",e.setAttribute("style","display: none; width: 1px; height: 1px;"),e.onload=function(t){document.getElementById("pixel_iframe").contentWindow.postMessage(JSON.stringify({basis:"iframe",action:"initialLoad"}),"https://ecommscript-integrationapp.trustpilot.com")},document.body.appendChild(e)},document.head.appendChild(r)}catch(i){console.log("TrustpilotPreview could not load")}window.addEventListener("message",function(i){var n=new URL(window.location).hostname,r=new URL(i.origin).hostname,a=-1===i.origin.indexOf(n),u=n!==r;if(a!==u&&console.log(`Origin missmatch: old condition result: ${a}, new condition result: ${u}`),i.data&&(!u||"https://ecommscript-integrationapp.trustpilot.com"===i.origin)&&"undefined"!=typeof TrustpilotPreview)if("string"==typeof i.data&&"submit"===i.data)TrustpilotPreview.sendTrustboxes();else if("string"==typeof i.data)if(jsonData=JSON.parse(i.data),jsonData.trustbox)TrustpilotPreview.setSettings(jsonData.trustbox);else if("updatePageUrls"===jsonData.type||"newTrustBox"===jsonData.type||"deletePageTrustBoxes"===jsonData.type)TrustpilotPreview.sendDataTransfer(i.data);else if("loadCategoryProductInfo"===jsonData.type){const t=trustpilot_trustbox_settings.categoryProductsData;t&&window.postMessage(JSON.stringify(t),window.origin)}else jsonData.customised?TrustpilotPreview.updateActive(jsonData.customised):jsonData.loadData&&function(i){const n=document.createElement("div"),r=[trustpilot_settings.sku||""];trustpilot_settings.product_id&&r.push(`${s}${trustpilot_settings.product_id}`),n.id="trustpilot_initial_data",n.setAttribute("data-page-urls",o(JSON.stringify(i.loadData.trustbox.pageUrls))),n.setAttribute("data-custom-trustboxes",i.loadData.customTrustBoxes),n.setAttribute("data-settings",o(JSON.stringify(i.loadData))),n.setAttribute("id","trustpilot-trustbox-preview"),n.setAttribute("data-source",i.loadData.source),n.setAttribute("data-sku",r.join(",")),n.setAttribute("data-locale",i.loadData.locale||"en-US"),document.body.appendChild(n);var a=document.createElement("script");a.type="text/javascript",a.src=t,a.async=!0,a.onload=function(){const t=JSON.stringify({basis:"iframe",TrustBoxPreviewMode:{integrationKey:trustpilot_settings.key},enable:!0,widgets:i.widgets});window.postMessage(t,window.origin)},document.head.appendChild(a),TrustpilotPreview.init([e],i.loadData.trustbox,window,document.getElementById("pixel_iframe").contentWindow)}(jsonData)})}else"undefined"!=typeof trustpilot_trustbox_settings?u():addEventListener("trustpilotTrustboxSettingsLoaded",function(){u()});function u(){const t=trustpilot_settings.page||"";"product"===t&&function(){const t=[trustpilot_settings.sku||""];trustpilot_settings.product_id&&t.push(`${s}${trustpilot_settings.product_id}`);const e=trustpilot_settings.name||"";for(var o in trustpilot_trustbox_settings.trustboxes)trustpilot_trustbox_settings.trustboxes[o].sku=t.join(","),trustpilot_trustbox_settings.trustboxes[o].name=e}(),trustpilot_trustbox_settings.trustboxes=trustpilot_trustbox_settings.trustboxes.filter(function(e){return t===e.page||d(e.page)===d(location.origin+location.pathname)||e.page===btoa(location.origin+location.pathname).toLowerCase()}),"complete"!==document.readyState?window.addEventListener("load",()=>{tp("trustBox",trustpilot_trustbox_settings)}):tp("trustBox",trustpilot_trustbox_settings)}function d(t){return"string"==typeof t?t.replace(/\/+$/,""):t}}();
//# sourceMappingURL=header_bigcommerce.min.js.map
